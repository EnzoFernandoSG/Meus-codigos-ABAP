CLASS lcl_view DEFINITION.
  PUBLIC SECTION.
    METHODS:
             load_xml_from_file
               IMPORTING iv_file_path TYPE string
               RETURNING VALUE(rv_xml_data) TYPE string.
ENDCLASS.

CLASS lcl_view IMPLEMENTATION.

  METHOD load_xml_from_file.
  DATA: lv_file_length TYPE i,
        lt_raw_content TYPE TABLE OF char1024,
        lv_raw_string  TYPE string.

  " Abrir o arquivo e carregar seu conteúdo
  CALL FUNCTION 'GUI_UPLOAD'
    EXPORTING
      filename            = iv_file_path
      filetype            = 'ASC'
    IMPORTING
      filelength          = lv_file_length
    TABLES
      data_tab            = lt_raw_content
    EXCEPTIONS
      file_open_error     = 1
      file_read_error     = 2
      no_batch            = 3
      gui_refuse_filetransfer = 4
      invalid_type        = 5
      no_authority        = 6
      unknown_error       = 7
      bad_data_format     = 8
      header_not_allowed  = 9
      separator_not_allowed = 10
      header_too_long     = 11
      unknown_dp_error    = 12
      access_denied       = 13
      dp_out_of_memory    = 14
      disk_full           = 15
      dp_timeout          = 16
      others              = 17.

  IF sy-subrc = 0.
    " Converter o conteúdo do arquivo em uma string única
    LOOP AT lt_raw_content INTO DATA(lv_line).
      CONCATENATE rv_xml_data lv_line INTO rv_xml_data.
    ENDLOOP.
  ELSE.
    " Tratamento de erro
    MESSAGE 'Erro ao carregar o arquivo XML.' TYPE 'E'.
  ENDIF.
ENDMETHOD.

ENDCLASS.